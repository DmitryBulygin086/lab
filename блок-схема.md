# Блок-схема программы по ГОСТ 19.701-90

## Основная программа (main)

```mermaid
flowchart TD
    Start([Начало])
    Input[/"Ввод: введите 4 числа A, B, C, D"/]
    ReadFunc["Вызов read_four_doubles(&A, &B, &C, &D)"]
    CheckRead{EOF?}
    PrintEOF[/"Вывод: 'Ввод завершён. Программа завершает работу.'"/]
    Exit1([Конец, return 1])
    
    Condition{"B > C И A > D?"}
    
    %% Ветка ДА
    FindMinFunc["min = findMin(A, B, C, D)"]
    SubA["A = A - min"]
    SubB["B = B - min"]
    SubC["C = C - min"]
    SubD["D = D - min"]
    
    %% Ветка НЕТ
    InitArr["arr[4] = {A, B, C, D}"]
    InitVars["maxNegative = -1e9<br/>index = -1"]
    InitI["i = 0"]
    LoopCheck{"i < 4?"}
    CheckNeg{"arr[i] < 0 И arr[i] > maxNegative?"}
    UpdateMax["maxNegative = arr[i]<br/>index = i"]
    IncI["i = i + 1"]
    CheckIndex{"index ≠ -1?"}
    SetZero["arr[index] = 0"]
    RestoreA["A = arr[0]"]
    RestoreB["B = arr[1]"]
    RestoreC["C = arr[2]"]
    RestoreD["D = arr[3]"]
    
    %% Вывод результата
    Output[/"Вывод: A, B, C, D"/]
    End([Конец, return 0])
    
    Start --> Input
    Input --> ReadFunc
    ReadFunc --> CheckRead
    CheckRead -->|Да| PrintEOF
    PrintEOF --> Exit1
    CheckRead -->|Нет| Condition
    
    Condition -->|Да| FindMinFunc
    FindMinFunc --> SubA
    SubA --> SubB
    SubB --> SubC
    SubC --> SubD
    SubD --> Output
    
    Condition -->|Нет| InitArr
    InitArr --> InitVars
    InitVars --> InitI
    InitI --> LoopCheck
    LoopCheck -->|Да| CheckNeg
    CheckNeg -->|Да| UpdateMax
    CheckNeg -->|Нет| IncI
    UpdateMax --> IncI
    IncI --> LoopCheck
    LoopCheck -->|Нет| CheckIndex
    CheckIndex -->|Да| SetZero
    CheckIndex -->|Нет| RestoreA
    SetZero --> RestoreA
    RestoreA --> RestoreB
    RestoreB --> RestoreC
    RestoreC --> RestoreD
    RestoreD --> Output
    
    Output --> End
```

## Функция findMin(a, b, c, d)

```mermaid
flowchart TD
    Start([Начало])
    Init["min = a"]
    Check1{"b < min?"}
    Assign1["min = b"]
    Check2{"c < min?"}
    Assign2["min = c"]
    Check3{"d < min?"}
    Assign3["min = d"]
    Return[["return min"]]
    End([Конец])
    
    Start --> Init
    Init --> Check1
    Check1 -->|Да| Assign1
    Check1 -->|Нет| Check2
    Assign1 --> Check2
    Check2 -->|Да| Assign2
    Check2 -->|Нет| Check3
    Assign2 --> Check3
    Check3 -->|Да| Assign3
    Check3 -->|Нет| Return
    Assign3 --> Return
    Return --> End
```

## Функция bubbleSort(arr[], n)

```mermaid
flowchart TD
    Start([Начало])
    InitI["i = 0"]
    CheckI{"i < n - 1?"}
    InitJ["j = 0"]
    CheckJ{"j < n - i - 1?"}
    Compare{"arr[j] > arr[j+1]?"}
    SwapTemp["temp = arr[j]"]
    Swap1["arr[j] = arr[j+1]"]
    Swap2["arr[j+1] = temp"]
    IncJ["j = j + 1"]
    IncI["i = i + 1"]
    End([Конец])
    
    Start --> InitI
    InitI --> CheckI
    CheckI -->|Да| InitJ
    CheckI -->|Нет| End
    InitJ --> CheckJ
    CheckJ -->|Да| Compare
    CheckJ -->|Нет| IncI
    Compare -->|Да| SwapTemp
    Compare -->|Нет| IncJ
    SwapTemp --> Swap1
    Swap1 --> Swap2
    Swap2 --> IncJ
    IncJ --> CheckJ
    IncI --> CheckI
```

## Функция read_four_doubles(a, b, c, d)

```mermaid
flowchart TD
    Start([Начало])
    Declare["char buf[512]"]
    LoopStart{Цикл while: истина}
    FgetsCall["fgets(buf, sizeof(buf), stdin)"]
    CheckFgets{fgets вернул NULL?}
    ReturnEOF[["return 0"]]
    EndEOF([Конец])
    
    SscanfCall["scanned = sscanf(buf, ' %lf %lf %lf %lf %c', a, b, c, d, &extra)"]
    CheckScanned{"scanned == 4?"}
    ReturnSuccess[["return 1"]]
    EndSuccess([Конец])
    
    PrintError[/"Вывод: 'Неверный ввод. Введите ровно 4 числа...'"/]
    Continue["continue"]
    
    Start --> Declare
    Declare --> LoopStart
    LoopStart --> FgetsCall
    FgetsCall --> CheckFgets
    CheckFgets -->|Да| ReturnEOF
    ReturnEOF --> EndEOF
    CheckFgets -->|Нет| SscanfCall
    SscanfCall --> CheckScanned
    CheckScanned -->|Да| ReturnSuccess
    ReturnSuccess --> EndSuccess
    CheckScanned -->|Нет| PrintError
    PrintError --> Continue
    Continue --> LoopStart
```

---

## Обозначения по ГОСТ 19.701-90:

- **Овал** `([...])` — начало/конец программы (терминатор)
- **Прямоугольник** `[...]` — процесс (вычисления, присваивание)
- **Ромб** `{...}` — решение (условие, проверка)
- **Параллелограмм** `[/...\]` — ввод/вывод данных
- **Прямоугольник с двойной вертикальной чертой** `[[...]]` — предопределённый процесс (вызов функции/возврат)

## Примечание:

<!-- Функция `bubbleSort` определена в коде, но не используется в программе.

Для просмотра визуализации блок-схемы откройте этот файл в редакторе с поддержкой Mermaid (например, VS Code с расширением Markdown Preview Mermaid Support) или используйте онлайн-редактор Mermaid. -->
